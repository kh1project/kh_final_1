<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="reserveMapper">
	<select id="seatcnt" resultType="_int">
    	SELECT count(*) FROM seat WHERE tid = #{tid}
	</select>
	
	<select id="s_leftcnt" resultType="_int">
		SELECT count(*) FROM seat WHERE tid = #{tid} AND reserved = 'n'
	</select>
	
	<select id="seat_all" resultType="seat">
	    SELECT * FROM seat WHERE tid = #{tid} ORDER BY id
	</select>
	
	<select id="pay_all" resultType="_int">
	    SELECT price FROM pay WHERE id = #{id}
	</select>
	
	<select id="search_Branch" resultType="BranchTheater">
		SELECT b.location
			 , b.name AS bname
			 , t.name AS tname
		  FROM movie_theater mt
		  JOIN theater t
		    ON mt.tid = t.id
		  JOIN branch b
		    ON t.bid = b.id
		 WHERE mt.id = #{tid}
	</select>
</mapper>
